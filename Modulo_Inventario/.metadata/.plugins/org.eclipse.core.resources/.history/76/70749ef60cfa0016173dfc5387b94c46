package Vista;

import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;

import Modelo.Producto;
import Tablas.Tabla_Producto_Estado;
import Tablas.Tabla_Producto_Modificar;

@SuppressWarnings("serial")
public class Pantalla_Cambio_Estado_Producto extends JFrame implements ActionListener, MouseListener{
	
	public ImageIcon ico_aplicacion;
	public JPanel pnl_superior, pnl_central, pnl_botones;
	public JLabel lbl_marca, lbl_modelo, lbl_estado;
	public JTextField txt_marca, txt_modelo, txt_estado;
	public JButton btn_buscarMarca, btn_buscarModelo, btn_activar, btn_desactivar;
	public Tabla_Producto_Estado estadoProducto;
	public JTable tabla;
	public JScrollPane scrollEstadoProducto;
	
	public Producto producto;
	
	Pantalla_Cambio_Estado_Producto () {
		
		super("Producto - Cambio de Estado");
		setSize(500, 300);
		setLocation(400, 25);
		setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		
		//Icono de la Aplicacion
		ico_aplicacion = new ImageIcon("src/Imagenes/icono.gif");
		setIconImage(ico_aplicacion.getImage());
		
		//PANEL SUPERIOR
		pnl_superior = new JPanel();
		getContentPane().add(pnl_superior, BorderLayout.NORTH);
		
		GridBagLayout gridCentral = new GridBagLayout();
		pnl_superior.setLayout(gridCentral);
		
		GridBagConstraints gridConCentral = new GridBagConstraints();
		gridConCentral.fill = GridBagConstraints.BOTH;
		gridConCentral.insets = new Insets(3, 3, 3, 3);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 0;
		gridConCentral.gridheight = 1;
		gridConCentral.gridwidth = 1;
		lbl_marca = new JLabel("Marca : ");
		pnl_superior.add(lbl_marca);
		gridCentral.setConstraints(lbl_marca, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 0;
		txt_marca = new JTextField(20);
		pnl_superior.add(txt_marca);
		gridCentral.setConstraints(txt_marca, gridConCentral);

		gridConCentral.gridx = 2;
		gridConCentral.gridy = 0;
		btn_buscarMarca = new JButton(new ImageIcon("src/Imagenes/buscarP.jpeg"));
		btn_buscarMarca.addActionListener(this);
		btn_buscarMarca.setBorder(null);
		pnl_superior.add(btn_buscarMarca);
		gridCentral.setConstraints(btn_buscarMarca, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 1;
		lbl_modelo = new JLabel("Modelo : ");
		pnl_superior.add(lbl_modelo);
		gridCentral.setConstraints(lbl_modelo, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 1;
		txt_modelo = new JTextField(20);
		pnl_superior.add(txt_modelo);
		gridCentral.setConstraints(txt_modelo, gridConCentral);

		gridConCentral.gridx = 2;
		gridConCentral.gridy = 1;
		btn_buscarModelo = new JButton(new ImageIcon("src/Imagenes/buscarP.jpeg"));
		btn_buscarModelo.addActionListener(this);
		btn_buscarModelo.setBorder(null);
		pnl_superior.add(btn_buscarModelo);
		gridCentral.setConstraints(btn_buscarModelo, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 2;
		lbl_estado = new JLabel("Estado : ");
		pnl_superior.add(lbl_modelo);
		gridCentral.setConstraints(lbl_modelo, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 2;
		txt_estado = new JTextField(20);
		pnl_superior.add(txt_estado);
		gridCentral.setConstraints(txt_estado, gridConCentral);
		
		//PANEL CENTRAL
		pnl_central = new JPanel();
		
		estadoProducto = new Tabla_Producto_Estado();
		tabla  = new JTable(estadoProducto);
		scrollEstadoProducto = new JScrollPane(tabla);
		pnl_central.add(scrollEstadoProducto);
		
		//PANEL BOTONES
		pnl_botones = new JPanel();
		
		btn_activar = new JButton(new ImageIcon("src/Imagenes/activar.jpeg"));
		btn_activar.addActionListener(this);
		btn_activar.setBorder(null);
		btn_desactivar = new JButton(new ImageIcon("src/Imagenes/desactivar.jpeg"));
		btn_desactivar.addActionListener(this);
		btn_desactivar.setBorder(null);
		
		pnl_botones.add(btn_activar);
		pnl_botones.add(btn_desactivar);
		
		getContentPane().add(pnl_central, BorderLayout.CENTER);
		getContentPane().add(pnl_botones, BorderLayout.SOUTH);
		
		((JComponent)getContentPane()).setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
		
		

	}
	
	public void limpiarPantalla(){
		
		txt_marca.setText("");
		txt_modelo.setText("");
		txt_estado.setText("");
		tabla.setModel(estadoProducto);
	}

	public void mouseClicked(MouseEvent evento) {
		
		int fila = tabla.rowAtPoint(evento.getPoint());
		
        txt_marca.setText(tabla.getValueAt(fila, 0).toString());
        txt_modelo.setText(tabla.getValueAt(fila, 1).toString());
        txt_estado.setText(tabla.getValueAt(fila, 2).toString());
        
        txt_marca.setEditable(false);
        txt_modelo.setEditable(false);
		
	}

	public void mouseEntered(MouseEvent e) {
		
	}

	public void mouseExited(MouseEvent e) {
		
	}

	public void mousePressed(MouseEvent e) {
		
	}

	public void mouseReleased(MouseEvent e) {
		
	}

	public void actionPerformed(ActionEvent evento) {
		
		if (evento.getSource() == btn_buscarMarca) {
			
			String marca;
			marca = txt_marca.getText();
			
			if ("".equals(marca)){
				JOptionPane.showMessageDialog(null, "Llenar el campo de busqueda");
				txt_marca.setText("");
			} else{
				Producto producto = new Producto();
				ArrayList<Producto> listaProductoMarca = producto.listarProductosxMarcaCodigo(marca);
				Tabla_Producto_Estado tablaProMarca= new Tabla_Producto_Estado(listaProductoMarca);
				tabla.removeAll();
				tabla.setModel(tablaProMarca);
				tabla.updateUI();
			}

		}
		
		if(evento.getSource() == btn_activar){	
//			if (txt_estado.getText().equals("")){
//				
//				JOptionPane.showMessageDialog(null, "Llenar campo de estado");
//			}else{
//				
//				producto = new Producto (Integer.parseInt(txt_codProducto.getText()), txt_categoria.getText(), txt_nombre.getText(), txt_marca.getText(), txt_modelo.getText(),
//						Double.parseDouble(txt_valor.getText()), Integer.parseInt(txt_minimo.getText()), Integer.parseInt(txt_maximo.getText()));
//
//				codProducto = Integer.parseInt(txt_codProducto.getText());
//
//				producto.modificarProducto(codProducto, producto);
//
//				JOptionPane.showMessageDialog(null, "Modificacion Realizada");
//				
//				limpiarPantalla();
//			}
		}
		
	}
	

}
