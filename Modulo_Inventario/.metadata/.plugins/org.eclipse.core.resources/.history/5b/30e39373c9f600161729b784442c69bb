package Vista;

import java.awt.BorderLayout;  
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.border.TitledBorder;

import Modelo.Producto;

@SuppressWarnings("serial")
public class Pantalla_Producto extends JFrame implements ActionListener, MouseListener{
	
	public ImageIcon ico_aplicacion;
	public JPanel pnl_botones, pnl_infoIroducto, pnl_botonesBuscar, pnl_tabla;
	public JLabel lbl_imagen, lbl_categoria, lbl_nombre, lbl_marca, lbl_modelo, lbl_serie,
				  lbl_color, lbl_valor, lbl_minimo, lbl_maximo, lbl_existencia;
	public JTextField txt_nombre, txt_marca, txt_modelo, txt_serie, txt_color,
					  txt_valor, txt_minimo, txt_maximo, txt_categoria;
	public JComboBox<String> cbx_categoria;
	public JButton btn_agregar, btn_actualizar, btn_limpiar, btn_salir, btn_buscarCategoria, 
				   btn_buscarNombre, btn_buscarMarca, btn_buscarModelo, btn_buscarPrecio,
				   btn_buscarColor, btn_buscarNumSerie, btn_buscarMinimo, btn_buscarMaximo, btn_relleno;
	public Tabla_Consulta_Producto jtproducto;
	public JTable tabla;
	public JScrollPane scrollProducto;
	
	
	public Pantalla_Producto (){
		
		super("Producto");
		setSize(600,400);
		setLocation(400,100);
//		setVisible(true);
		this.setResizable(false);
		setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		
		//Icono de la Aplicacion
		ico_aplicacion = new ImageIcon("src/Imagenes/icono.gif");
		setIconImage(ico_aplicacion.getImage());
		
			
		
//		getContentPane().add(pnl_imagen, BorderLayout.WEST);
		getContentPane().add(pnl_infoIroducto, BorderLayout.NORTH);
		getContentPane().add(pnl_tabla, BorderLayout.CENTER);
		getContentPane().add(pnl_botones, BorderLayout.SOUTH);
//		getContentPane().add(pnl_lista, BorderLayout.SOUTH);
		
		pack();
		((JComponent)getContentPane()).setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
		
	}
	
	public void limpiarPantalla(){
		
		txt_nombre.setText("");
		txt_marca.setText("");
		txt_modelo.setText("");
		txt_valor.setText("");
		txt_minimo.setText("");
		txt_maximo.setText("");
		
	}

	public void actionPerformed(ActionEvent evento) {
		
		if(evento.getSource() == btn_agregar){	
			
			String categoria, nombre, marca, modelo;
			double valor;
			int minimo, maximo;
			
			categoria = (String) cbx_categoria.getSelectedItem();
			nombre = txt_nombre.getText();
			marca = txt_marca.getText();
			modelo = txt_modelo.getText();
			valor = Double.parseDouble(txt_valor.getText());
			minimo = Integer.parseInt(txt_minimo.getText());
			maximo = Integer.parseInt(txt_maximo.getText());
			
			Producto producto = new Producto(categoria, nombre, marca, modelo, valor, minimo, maximo);

			producto.ingresarProducto(producto);
			JOptionPane.showMessageDialog(null, "Registro exitoso");			
			limpiarPantalla();
			
		}
		
		if(evento.getSource() == btn_buscarMarca){
			
			String marca = txt_marca.getText();
			
			marca = txt_marca.getText();
			if ("".equals(marca)) {
				JOptionPane.showMessageDialog(null, "Llenar el campo de busqueda");
				txt_marca.setText("");
			}else{
					Producto producto = new Producto();
					ArrayList<Producto> listaProductos = producto.listaProductosxMarca(marca);
					Tabla_Consulta_Producto tProd = new Tabla_Consulta_Producto(listaProductos);
					tabla.removeAll();
					tabla.setModel(tProd);
					tabla.updateUI();
			}
		}
		
		if(evento.getSource() == btn_actualizar){			
			
		}
		
		if(evento.getSource() == btn_limpiar){			
			
			limpiarPantalla();
			
		}
		
		if(evento.getSource() == btn_salir){

		}
		
		
	}
	
	public void mouseClicked(MouseEvent evento) {
		
		int fila = tabla.rowAtPoint(evento.getPoint());
        txt_nombre.setText(tabla.getValueAt(fila, 0).toString());
        txt_marca.setText(tabla.getValueAt(fila, 1).toString());
        txt_modelo.setText(tabla.getValueAt(fila, 2).toString());
        txt_valor.setText(tabla.getValueAt(fila, 3).toString());
        txt_minimo = (JTextField) tabla.getValueAt(fila, 4);
        txt_maximo = (JTextField) tabla.getValueAt(fila, 5);
        
	}

	public void mouseEntered(MouseEvent e) {
		
	}

	public void mouseExited(MouseEvent e) {
		
	}

	public void mousePressed(MouseEvent e) {
		
	}

	public void mouseReleased(MouseEvent e) {
		
	}


}
