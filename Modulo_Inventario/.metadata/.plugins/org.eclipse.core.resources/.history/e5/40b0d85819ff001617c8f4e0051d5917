package Vista;

import java.awt.BorderLayout;    
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.sql.Date;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

import Modelo.Kardex;

@SuppressWarnings("serial")
public class Pantalla_Kardex extends JFrame implements ActionListener{
	
	public ImageIcon ico_aplicacion;
	public JPanel pnl_central, pnl_botones, pnl_tabla;
	public JLabel lbl_tipo, lbl_fecha, lbl_producto, lbl_cantidad, lbl_preCompra, lbl_detalle, lbl_calendario;
	public JComboBox<String> cbx_tipo;
	public JTextField txt_fecha, txt_producto, txt_cantidad, txt_preCompra;
	public JTextArea txta_detalle;;
	public JButton btn_agregar, btn_limpiar;
	public JScrollPane scroll;
	
	public Pantalla_Kardex (){
		
		super("Kardex - Entradas y Salidas");
		setSize(500, 450);
		setLocation(400, 25);
		setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		
		//Icono de la Aplicacion
		ico_aplicacion = new ImageIcon("src/Imagenes/icono.gif");
		setIconImage(ico_aplicacion.getImage());
		
		//PANEL CENTRAL
		pnl_central = new JPanel();
		getContentPane().add(pnl_central, BorderLayout.NORTH);
		
		GridBagLayout gridCentral = new GridBagLayout();
		pnl_central.setLayout(gridCentral);
		
		GridBagConstraints gridConCentral = new GridBagConstraints();
		gridConCentral.fill = GridBagConstraints.BOTH;
		gridConCentral.insets = new Insets(3, 3, 3, 3);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 0;
		gridConCentral.gridheight = 1;
		gridConCentral.gridwidth = 1;
		lbl_tipo = new JLabel("Tipo : ");
		pnl_central.add(lbl_tipo);
		gridCentral.setConstraints(lbl_tipo, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 0;
		cbx_tipo = new JComboBox<String>();
		cbx_tipo.addItem("INGRESO");
		cbx_tipo.addItem("EGRESO");
		pnl_central.add(cbx_tipo);
		gridCentral.setConstraints(cbx_tipo, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 1;
		lbl_fecha = new JLabel("Fecha : ");
		pnl_central.add(lbl_fecha);
		gridCentral.setConstraints(lbl_fecha, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 1;
		txt_fecha = new JTextField();	
		pnl_central.add(txt_fecha);
		gridCentral.setConstraints(txt_fecha, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 2;
		lbl_producto = new JLabel("Producto : ");
		pnl_central.add(lbl_producto);
		gridCentral.setConstraints(lbl_producto, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 2;
		txt_producto = new JTextField(20);
		pnl_central.add(txt_producto);
		gridCentral.setConstraints(txt_producto, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 3;
		lbl_cantidad = new JLabel("Cantidad : ");
		pnl_central.add(lbl_cantidad);
		gridCentral.setConstraints(lbl_cantidad, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 3;
		txt_cantidad = new JTextField(20);
		pnl_central.add(txt_cantidad);
		gridCentral.setConstraints(txt_cantidad, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 4;
		lbl_preCompra = new JLabel("Precio de Compra/Venta : ");
		pnl_central.add(lbl_preCompra);
		gridCentral.setConstraints(lbl_preCompra, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 4;
		txt_preCompra = new JTextField(20);
		pnl_central.add(txt_preCompra);
		gridCentral.setConstraints(txt_preCompra, gridConCentral);
		
		gridConCentral.gridx = 0;
		gridConCentral.gridy = 5;
		lbl_detalle = new JLabel("Detalle : ");
		pnl_central.add(lbl_detalle);
		gridCentral.setConstraints(lbl_detalle, gridConCentral);
		
		gridConCentral.gridx = 1;
		gridConCentral.gridy = 5;
		txta_detalle = new JTextArea(2, 5);
		txta_detalle.setLineWrap(true);
		txta_detalle.setWrapStyleWord(true);
		JScrollPane scroll = new JScrollPane();
		scroll.setViewportView(txta_detalle);		
		pnl_central.add(scroll);
		gridCentral.setConstraints(scroll, gridConCentral);

		
		//PANEL BOTONES
		pnl_botones = new JPanel();
		
		GridBagLayout gridInferior = new GridBagLayout();
		pnl_botones.setLayout(gridInferior);
		
		GridBagConstraints gridConInferior= new GridBagConstraints();
		gridConInferior.fill = GridBagConstraints.BOTH;
		gridConInferior.insets = new Insets(3, 3, 3, 3);
		
		gridConInferior.gridx = 0;
		gridConInferior.gridy = 0;
		gridConInferior.gridheight = 1;
		gridConInferior.gridwidth = 1;		
		btn_agregar = new JButton(new ImageIcon("src/Imagenes/agregar.jpeg"));
		btn_agregar.setBorder(null);
		btn_agregar.addActionListener(this);
		pnl_botones.add(btn_agregar);
		gridInferior.setConstraints(btn_agregar, gridConInferior);	
		
		gridConInferior.gridx = 1;
		gridConInferior.gridy = 0;
		btn_limpiar = new JButton(new ImageIcon("src/Imagenes/limpiar.jpeg"));
		btn_limpiar.setBorder(null);
		btn_limpiar.addActionListener(this);
		pnl_botones.add(btn_limpiar);
		gridInferior.setConstraints(btn_limpiar, gridConInferior);
		
		getContentPane().add(pnl_central, BorderLayout.CENTER);
		getContentPane().add(pnl_botones, BorderLayout.SOUTH);
		
		((JComponent)getContentPane()).setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
	}
	
	public void limpiarPantalla(){
		
		cbx_tipo.setSelectedItem(null);
		txt_fecha.setText("");
		txt_producto.setText("");
		txt_cantidad.setText("");
		txt_preCompra.setText("");
		txta_detalle.setText("");
		
	}
	
	
	public void actionPerformed(ActionEvent evento) {
		
		if(evento.getSource() == btn_agregar){	
			
			String tipo, detalle;
			Date fecha;
			double valor;
			int idproducto, cantidad;
			
			tipo = (String) cbx_tipo.getSelectedItem();
			fecha = Date.valueOf(txt_fecha.getText());
			idproducto = Integer.parseInt(txt_producto.getText());
			cantidad = Integer.parseInt(txt_cantidad.getText());
			valor = Double.parseDouble(txt_preCompra.getText());
			detalle = txta_detalle.getText();			
			
			Kardex kardexIE = new Kardex(tipo, fecha, idproducto, cantidad, valor, detalle);

			kardexIE.ingresarKardex(kardexIE);
			JOptionPane.showMessageDialog(null, "Registro exitoso");			
			limpiarPantalla();

			
		}
		
		if(evento.getSource() == btn_limpiar){
			
			limpiarPantalla();
			
		}
		
		
	}
		
	


	
}



